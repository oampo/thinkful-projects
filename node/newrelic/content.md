Inspired by the [story of the programming antihero](http://www.dodgycoder.net/2012/02/coding-tricks-of-game-developers.html) you decide that this cunning technique can easily be applied to web applications.  By adding an artificial delay and some random errors to your app, your colleagues will have to work extra hard to make the app perform well.  Then when the time comes to deploy, you can simply remove this code, and you'll have an app which is blazing fast.

You need a way to test out this ruse by monitoring the performance of the app, and the [New Relic](http://newrelic.com/) performance monitoring tool seems to fit the bill.

## Milestones

### Milestone 1: Become an antihero

To complete this milestone you should set up a simple Express app which responds to requests to the `/` route with the string `'Success'`.  But before you respond, a random delay of up to two seconds should be inserted.  Also 10% of the requests to the server should fail due to an error.

Test out your endpoint by visiting the endpoint a few times.  You should notice that some requests take longer than than others, and the occasional request will fail with an error.  So you don't need to manually restart the server when you throw an error, you should run your code using [the nodemon script](https://github.com/remy/nodemon).

#### Sample Code

When you have completed the milestone, compare your code with [this sample](https://gist.github.com/oampo/040ce925959caf77c5d3).

### Milestone 2: Set up New Relic

To complete this milestone you should set up your application to use New Relic APM.  Sign up for New Relic, and follow the instructions given for setting up APM for a Node application.

Run your app again, and make a couple of requests.  Within five minutes, you should see the APM dashboard with information about the performance of your server.

### Milestone 3: Simulate some traffic

To complete this milestone you should set up a script which makes a series of concurrent requests to your server to simulate its behaviour under load.  You can do this using whichever Node client library you like.  The [ab module](https://www.npmjs.com/package/ab) provides a simple way to perform a concurrent benchmark.

Try running your benchmark, then take a look at the reports generated by New Relic.  You should see that your response times are fairly long, your error rate is pretty high, and your Apdex score (an overall measure of user satisfaction) is very low.

Next try reducing the delay and running your benchmark again.  You should see the New Relic metrics improve significantly.

#### Sample Code

You can see a sample of the traffic simulation code in [this gist](https://gist.github.com/oampo/ff4c0bccf01371b593d6).

